---
title: "Dns Settings on Archlinux"
date: 2021-01-26T21:43:35+08:00
draft: false
keywords: ["Archlinux"]
tags: ["Archlinux"]
categories: ["Tech"]
---

## Arch Linux DNS设置

1. 安装`dnsmasq`

```sh
sudo pacman -S dnsmasq
```

2. 配置`/etc/resolv.conf`中的域名代理服务器

```sh
# Tencent
nameserver 119.29.29.29
nameserver 182.254.118.118

# Ali
nameserver 223.5.5.5
nameserver 223.6.6.6

# OpenDNS IPv4 nameservers
nameserver 208.67.222.222
nameserver 208.67.220.220

# OpenDNS IPv6 nameservers
nameserver 2620:0:ccc::2
nameserver 2620:0:ccd::2

# Google IPv4 nameservers
nameserver 8.8.8.8
nameserver 8.8.4.4

# Google IPv6 nameservers
nameserver 2001:4860:4860::8888
nameserver 2001:4860:4860::8844

# Comodo nameservers
nameserver 8.26.56.26
nameserver 8.20.247.20

# Generated by NetworkManager
nameserver 192.168.1.1
```

3. 防止`/etc/resolv.conf`被修改

```sh
sudo chattr +i /etc/resolv.conf
```

4. 减少主机名查找时间

```sh
sudo echo "options timeout:1" > /etc/resolv.conf.tail
```

5. 启动`dnsmasq`

```sh
sudo systemctl enable dnsmasq.service --now

```

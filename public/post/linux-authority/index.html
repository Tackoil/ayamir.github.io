<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Linux Authority - Ayamir&#39;s Blog</title><meta name="Description" content=""><meta property="og:title" content="Linux Authority" />
<meta property="og:description" content="文件和目录的权限 权限属性： id：显示用户身份标识 一个用户可以拥有文件和目录，同时对其拥有的文件和目录有控制权 用户之上是群组，一个群组可以由多" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ayamir.github.io/post/linux-authority/" /><meta property="article:section" content="post" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux Authority"/>
<meta name="twitter:description" content="文件和目录的权限 权限属性： id：显示用户身份标识 一个用户可以拥有文件和目录，同时对其拥有的文件和目录有控制权 用户之上是群组，一个群组可以由多"/>
<meta name="application-name" content="Ayamir&#39;s Blog">
<meta name="apple-mobile-web-app-title" content="Ayamir&#39;s Blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://ayamir.github.io/post/linux-authority/" /><link rel="next" href="https://ayamir.github.io/post/dns-settings-on-archlinux/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Linux Authority",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/ayamir.github.io\/post\/linux-authority\/"
        },"genre": "post","wordcount":  1251 ,
        "url": "https:\/\/ayamir.github.io\/post\/linux-authority\/","publisher": {
            "@type": "Organization",
            "name": "作者"},"author": {
                "@type": "Person",
                "name": "作者"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Ayamir&#39;s Blog">Ayamir&#39;s Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Ayamir&#39;s Blog">Ayamir&#39;s Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="page single special"><h1 class="single-title animated pulse faster">Linux Authority</h1><div class="content" id="content">
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
文件和目录的权限
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>
<img src="../文件和目录的权限/2021-03-07_12-23-23_screenshot.png" alt="../文件和目录的权限/2021-03-07_12-23-23_screenshot.png" title="../文件和目录的权限/2021-03-07_12-23-23_screenshot.png" /></p>
<p>
<img src="../文件和目录的权限/2021-03-07_12-23-48_screenshot.png" alt="../文件和目录的权限/2021-03-07_12-23-48_screenshot.png" title="../文件和目录的权限/2021-03-07_12-23-48_screenshot.png" />
权限属性：</p>
<p>
<img src="../文件和目录的权限/2021-03-07_12-24-11_screenshot.png" alt="../文件和目录的权限/2021-03-07_12-24-11_screenshot.png" title="../文件和目录的权限/2021-03-07_12-24-11_screenshot.png" /></p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
id：显示用户身份标识
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>
一个用户可以拥有文件和目录，同时对其拥有的文件和目录有控制权
用户之上是群组，一个群组可以由多个用户组成
文件和目录的访问权限由其所有者授予群组或者用户</p>
<p>
<img src="../id：显示用户身份标识/2021-03-07_12-13-41_screenshot.png" alt="../id：显示用户身份标识/2021-03-07_12-13-41_screenshot.png" title="../id：显示用户身份标识/2021-03-07_12-13-41_screenshot.png" />
uid 和 gid 分别说明了当前用户的用户编号与用户名、所属用户组的编号与组名
groups 后的内容说明了用户还属于哪些组，说明了其对应的编号和名称</p>
<p>
许多类 UNIX 系统会将普通用户分配到一个公共的群组中如：users
现代 Linux 操作是创建一个独一无二的只有一个用户的同名群组</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-2">
<h2 id="headline-3">
chmod：更改文件模式
</h2>
<div id="outline-text-headline-3" class="outline-text-2">
<p>chmod 支持两种标识方法</p>
<ol>
<li>
<p>八进制表示法</p>
<table>
<tbody>
<tr>
<td class="align-right">八进制</td>
<td class="align-right">二进制</td>
<td>文件模式</td>
</tr>
<tr>
<td class="align-right">0</td>
<td class="align-right">000</td>
<td>—</td>
</tr>
<tr>
<td class="align-right">1</td>
<td class="align-right">001</td>
<td>–x</td>
</tr>
<tr>
<td class="align-right">2</td>
<td class="align-right">010</td>
<td>-w-</td>
</tr>
<tr>
<td class="align-right">3</td>
<td class="align-right">011</td>
<td>-wx</td>
</tr>
<tr>
<td class="align-right">4</td>
<td class="align-right">100</td>
<td>r–</td>
</tr>
<tr>
<td class="align-right">5</td>
<td class="align-right">101</td>
<td>r-x</td>
</tr>
<tr>
<td class="align-right">6</td>
<td class="align-right">110</td>
<td>rw-</td>
</tr>
<tr>
<td class="align-right">7</td>
<td class="align-right">111</td>
<td>rwx</td>
</tr>
</tbody>
</table>
<p>
常用的模式有 7,6,5,4,0</p>
</li>
<li>
<p>符号表示法</p>
<table>
<tbody>
<tr>
<td>符号</td>
<td>含义</td>
</tr>
<tr>
<td>u</td>
<td>user：表示文件或目录的所有者</td>
</tr>
<tr>
<td>g</td>
<td>group：文件所属群组</td>
</tr>
<tr>
<td>o</td>
<td>others：表示其他用户</td>
</tr>
<tr>
<td>a</td>
<td>all：u+g+o</td>
</tr>
</tbody>
</table>
<p>如果没有指定字符默认使用 all
&#39;+&#39;表示添加一种权限
&#39;-&#39;表示删除一种权限
例如：</p>
<table>
<tbody>
<tr>
<td>符号</td>
<td>含义</td>
</tr>
<tr>
<td>u+x</td>
<td>所有者+可执行</td>
</tr>
<tr>
<td>u-x</td>
<td>所有者-可执行</td>
</tr>
<tr>
<td>+x</td>
<td>所有用户+可执行</td>
</tr>
<tr>
<td>o-rw</td>
<td>其他用户-读写</td>
</tr>
<tr>
<td>go=rw</td>
<td>群组用户和其他用户权限更改为读，写</td>
</tr>
<tr>
<td>u+x,go=rx</td>
<td>所有者+可执行，群组用户和其他用户权限更改为读，可执行</td>
</tr>
</tbody>
</table>
<p>&#39;-R&#39;=&#39;–recursive&#39;表示递归设置</p>
</li>
</ol>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
umask：设置文件默认权限
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>使用八进制表示法表示从文件模式属性中删除一个位掩码
掩码的意思：用掩码来取消不同的文件模式</p>
<div class="src src-shell">
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">umask</code></pre></div>
</div>
<p>可以看到输出为：</p>
<div class="src src-shell">
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell"><span class="m">0022</span></code></pre></div>
</div>
<p>不同 linux 发行版默认的文件权限不同，这里的输出是 gentoo linux 上普通用户对应的的输出
0022：先不看第一个 0,后面的 0|2|2 用二进制展开结果是：000|010|010</p>
<table>
<tbody>
<tr>
<td>原始文件模式</td>
<td>—</td>
<td>rw-</td>
<td>rw-</td>
<td>rw-</td>
</tr>
<tr>
<td>掩码</td>
<td>000</td>
<td>000</td>
<td>000</td>
<td>010</td>
</tr>
<tr>
<td>结果</td>
<td>—</td>
<td>rw-</td>
<td>rw-</td>
<td>r–</td>
</tr>
</tbody>
</table>
<p>掩码中 1 对应位处的权限会被取消，0则不受影响
所以会有这样的结果：
<img src="../umask：设置文件默认权限/2021-03-07_12-47-56_screenshot.png" alt="../umask：设置文件默认权限/2021-03-07_12-47-56_screenshot.png" title="../umask：设置文件默认权限/2021-03-07_12-47-56_screenshot.png" /></p>
<p>
再来谈最前面的 0:因为除了 rwx 之外还有较少用到的权限设置</p>
<ol>
<li>
<p>setuid 位:4000(8 进制)
设置此位到一个可执行文件时，有效用户 ID 将从实际运行此程序的用户 ID 变成该程序拥有者的 ID
设置场景：应用于由 root 用户拥有的程序，当普通用户运行一个具有 setuid 位的程序时，这个程序会以超级用户的权限执行，因此可以访问普通用户无法访问到的文件和目录
设置程序 setuid：</p>
<div class="src src-shell">
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">chmod u+s program_name</code></pre></div>
</div>
<p>结果：</p>
<div class="src src-shell">
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">-rwsr-xr-x</code></pre></div>
</div>
<p>可以看到第二组权限中第一个符号是 s</p>
</li>
<li>
<p>setgid 位:2000(8 进制)
有效组 ID 从该用户的实际组 ID 更改为该文件所有者的组 ID
设置场景：当一个公共组下的成员需要访问共享目录下的所有文件时可以设置此位
对一个目录设置 setgid 位，则该目录下新创建的文件将由该目录所在组所有</p>
<div class="src src-shell">
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">chmod g+s dir_name</code></pre></div>
</div>
<p>结果：</p>
<div class="src src-shell">
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">drwxrwsr-x</code></pre></div>
</div>
<p>可以看到第二组权限中最后一个符号是 s(替换了 x)</p>
</li>
<li>
<p>sticky 位:1000(8 进制)
标记一个可执行文件是“不可交换的”，linux 中默认会忽略文件的 sticky 位，但是对目录设置 sticky 位，能阻止用户删除或者重命名文件，除非用户是这个目录的所有者，文件所有者或者 root
用来控制对共享目录的访问</p>
<div class="src src-shell">
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">chmod +t dir_name</code></pre></div>
</div>
<p>结果：</p>
<div class="src src-shell">
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">drwxrwxrwt</code></pre></div>
</div>
<p>可以看到第三组权限中最后一个符号是 t(替换了 x)</p>
</li>
</ol>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
su：以另一个用户身份运行 shell
</h2>
</div>
<div id="outline-container-headline-6" class="outline-2">
<h2 id="headline-6">
sudo：以另一个用户身份执行命令
</h2>
</div>
<div id="outline-container-headline-7" class="outline-2">
<h2 id="headline-7">
chown：更改文件所有者
</h2>
</div>
<div id="outline-container-headline-8" class="outline-2">
<h2 id="headline-8">
chgrp：更改文件所属群组
</h2>
</div>
<div id="outline-container-headline-9" class="outline-2">
<h2 id="headline-9">
passwd：更改用户密码
</h2>
</div>
</div></div></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.82.0-DEV">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
